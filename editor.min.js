!function(t,e,i){function o(i,n){if(!e[i]){if(!t[i]){var c=typeof require=="function"&&require;if(!n&&c)return c(i,!0);if(s)return s(i,!0);throw new Error("Cannot find module '"+i+"'")}var l=e[i]={exports:{}};t[i][0].call(l.exports,function(e){var s=t[i][1][e];return o(s?s:e)},l,l.exports)}return e[i].exports}var s=typeof require=="function"&&require;for(var n=0;n<i.length;n++)o(i[n]);return o}({1:[function(t,e,i){var o=t("./libs/canvasStarter"),s=t("./libs/coordinateNorm"),n=t("./libs/blocksPainter"),c=t("./libs/canvasPositionDetector"),l=t("./libs/gameBlockConfig");var h=new l,a=document.getElementById("level-editor"),r=document.getElementById("grids"),d=new o(r),u=new n(a,new s,new c(a),h);d.drawLines(10,10);u.start();var p=document.getElementById("generate-btn"),f=document.getElementById("conf-editor"),k=document.getElementById("block-btn-list");p.addEventListener("click",function(){var t=h.paintedBlocks;f.value=JSON.stringify(t)});k.addEventListener("click",function(t){h.setActiveColor(t.target.id+"Color")})},{"./libs/blocksPainter":2,"./libs/canvasPositionDetector":4,"./libs/canvasStarter":5,"./libs/coordinateNorm":6,"./libs/gameBlockConfig":7}],2:[function(t,e,i){"use strict";var o=t("./canvasFactory");e.exports=s;function s(t,e,i,s){this.canvas=t;this.ctx=t.getContext("2d");this.cm=e;this.mp=i;this.cfg=s;this.blockWidth=s.blockWidth||10;this.blockHeight=s.blockHeight||10;this.isPainting=false;this.tempBlock=undefined;this.canvasFactory=new o;this.bottomCanvas=undefined;this.bottomCtx=undefined;this.createAdditionalCanvas()}s.prototype.createAdditionalCanvas=function(){this.bottomCanvas=this.canvasFactory.createBelow(this.canvas);this.bottomCtx=this.bottomCanvas.getContext("2d")};s.prototype.start=function(){this.canvas.addEventListener("mousedown",this.onMouseDown.bind(this));this.canvas.addEventListener("mousemove",this.onMouseMove.bind(this));this.canvas.addEventListener("mouseup",this.onMouseUp.bind(this));this.canvas.addEventListener("dblclick",this.onDoubleClick.bind(this))};s.prototype.onMouseDown=function(t){this.isPainting=true;var e=this.mp.getMousePosition(t);this.paintBottomBlock(this.cm.normalize(e,this.blockWidth,this.blockHeight))};s.prototype.onMouseMove=function(t){var e=this.mp.getMousePosition(t),i=this.cm.normalize(e,this.blockWidth,this.blockHeight);if(this.isPainting){this.paintBottomBlock(i)}else{if(this.tempBlock){this.ctx.clearRect(this.tempBlock.x,this.tempBlock.y,this.tempBlock.width,this.tempBlock.height)}this.tempBlock={x:i.x,y:i.y,width:this.blockWidth,height:this.blockHeight};this.ctx.fillStyle=this.cfg.getActiveColor();this.ctx.fillRect(this.tempBlock.x,this.tempBlock.y,this.tempBlock.width,this.tempBlock.height)}};s.prototype.onMouseUp=function(t){this.isPainting=false;this.tempBlock=undefined};s.prototype.onDoubleClick=function(t){var e=this.mp.getMousePosition(t),i=this.cm.normalize(e,this.blockWidth,this.blockHeight);this.cfg.deleteBlock(i);this.deletePaintedBottomBlock(i)};s.prototype.paintBlock=function(t){this.ctx.fillStyle=this.cfg.getActiveColor();this.ctx.fillRect(t.x,t.y,this.blockWidth,this.blockHeight)};s.prototype.paintBottomBlock=function(t){if(!this.bottomCtx){return}this.bottomCtx.fillStyle=this.cfg.getActiveColor();this.bottomCtx.fillRect(t.x,t.y,this.blockWidth,this.blockHeight);this.cfg.addBlock(this.cfg.activeKey,t)};s.prototype.deletePaintedBottomBlock=function(t){this.bottomCtx.clearRect(t.x,t.y,this.blockWidth,this.blockHeight)};s.prototype.getPaintedCanvas=function(){return this.bottomCanvas}},{"./canvasFactory":3}],3:[function(t,e,i){"use strict";e.exports=o;function o(){}o.prototype.createBelow=function(t){var e=document.createElement("canvas");e.width=t.width;e.height=t.height;var i=t.getBoundingClientRect();e.style.position="absolute";e.style.top=i.top+"px";e.style.left=i.left+"px";e.style["background-color"]="transparent";e.style["z-index"]=99;document.body.appendChild(e);return e}},{}],4:[function(t,e,i){"use strict";e.exports=o;function o(t){this.canvas=t;this.calculateCanvasPosition()}o.prototype.calculateCanvasPosition=function(){if(document.defaultView&&document.defaultView.getComputedStyle){this.stylePaddingLeft=parseInt(document.defaultView.getComputedStyle(this.canvas,null)["paddingLeft"],10)||0;this.stylePaddingTop=parseInt(document.defaultView.getComputedStyle(this.canvas,null)["paddingTop"],10)||0;this.styleBorderLeft=parseInt(document.defaultView.getComputedStyle(this.canvas,null)["borderLeftWidth"],10)||0;this.styleBorderTop=parseInt(document.defaultView.getComputedStyle(this.canvas,null)["borderTopWidth"],10)||0}var t=document.body.parentNode;this.htmlTop=t.offsetTop;this.htmlLeft=t.offsetLeft};o.prototype.getMousePosition=function(t){var e=0,i=0,o,s,n=this.canvas;if(n.offsetParent!==undefined){do{e+=n.offsetLeft;i+=n.offsetTop}while(n=n.offsetParent)}e+=this.stylePaddingLeft+this.styleBorderLeft+this.htmlLeft;i+=this.stylePaddingTop+this.styleBorderTop+this.htmlTop;o=t.pageX-e;s=t.pageY-i;return{x:o,y:s}}},{}],5:[function(t,e,i){e.exports=o;function o(t){this.canvas=t;this.ctx=t.getContext("2d")}o.prototype.drawLines=function(t,e){this.ctx.strokeStyle="#E74C3C";this.ctx.beginPath();for(var i=t,o=this.canvas.width;i<o;i+=t){this.ctx.moveTo(i,0);this.ctx.lineTo(i,this.canvas.height)}for(i=e,o=this.canvas.height;i<o;i+=e){this.ctx.moveTo(0,i);this.ctx.lineTo(this.canvas.width,i)}this.ctx.stroke()}},{}],6:[function(t,e,i){e.exports=o;function o(){}o.prototype.normalize=function(t,e,i){return{x:t.x-t.x%e,y:t.y-t.y%i}}},{}],7:[function(t,e,i){e.exports=o;function o(t){t=t||{};this.blocksColor=t.blocksColor||"#010101";this.actorColor=t.actorColor||"#ECF0F1";this.exitColor=t.exitColor||"#27AE60";this.keyColor=t.keyColor||"#E74C3C";this.blockWidth=t.blockWidth||10;this.blockHeight=t.blockHeight||10;this.paintedBlocks={blocks:[],actor:[],exit:[],key:[]};this.activeColor=this.blocksColor;this.activeKey="blocksColor"}o.prototype.setActiveColor=function(t){if(!this[t]){return}this.activeColor=this[t];this.activeKey=t};o.prototype.getActiveColor=function(){return this.activeColor};o.prototype.addBlock=function(t,e){t=t||this.activeKey;var i=t.replace("Color","");if(!this.paintedBlocks[i]){return}if(this.blockExist(i,e)){return}this.paintedBlocks[i].push({x:e.x,y:e.y,width:this.blockWidth,height:this.blockHeight,color:this[t]})};o.prototype.blockExist=function(t,e){var i=false;this.paintedBlocks[t].forEach(function(t){if(t.x===e.x&&t.y===e.y){i=true;return}});return i};o.prototype.deletePaintedBlockItem=function(t,e){for(var i=this.paintedBlocks[t].length-1;i>=0;i--){if(this.paintedBlocks[t][i].x===e.x&&this.paintedBlocks[t][i].y===e.y){this.paintedBlocks[t].splice(i,1)}}};o.prototype.deleteBlock=function(t){this.deletePaintedBlockItem("blocks",t);this.deletePaintedBlockItem("actor",t);this.deletePaintedBlockItem("key",t);this.deletePaintedBlockItem("exit",t)}},{}]},{},[1]);